<!DOCTYPE html>
<html>
    <head>
        <title>JavaScript - Chronomètre</title>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

        <style type="text/css">
            table {border : 1px solid blue;border-collapse:collapse;}
            td {border : 1px solid red/*lightblue*/;}
        </style>
    </head>
    <body>
        <div style="margin-left:200px;width:200px">	
            <table>
                <tr> 
                    <td colspan="6" align="center">
                        <input type="button" value="nouvelle partie"  />
                        <input type="button" value="cacher grille" />
                        <input type="button" value="decouvrir grille" />
                    </td>
                </tr>
                <tr> 
                    <td align="center"><img name="im00" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im01" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im02" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im03" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im04" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im05" src="./images/blanc.jpg" width="80" height="80"></td>
                </tr>
                <tr> 
                    <td align="center"><img name="im10" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im11" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im12" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im13" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im14" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im15" src="./images/blanc.jpg" width="80" height="80"></td>
                </tr>
                <tr> 
                    <td align="center"><img name="im20" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im21" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im22" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im23" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im24" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im25" src="./images/blanc.jpg" width="80" height="80"></td>
                </tr>
                <tr> 
                    <td align="center"><img name="im30" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im31" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im32" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im33" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im34" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im35" src="./images/blanc.jpg" width="80" height="80"></td>
                </tr>
                <tr> 
                    <td align="center"><img name="im40" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im41" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im42" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im43" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im44" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im45" src="./images/blanc.jpg" width="80" height="80"></td>
                </tr>
                <tr> 
                    <td align="center"><img name="im50"  src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im51" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im52" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im53" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im54" src="./images/blanc.jpg" width="80" height="80"></td>
                    <td align="center"><img name="im55" src="./images/blanc.jpg" width="80" height="80"></td>
                </tr>
            </table>	
            <span id="message" ></span>
        </div>


        <script >
            //language="JavaScript" type="text/JavaScript"
            var myTime;
            var count = 0;
            var tabImages;
            var state = false;
            document.getElementsByTagName("input")[0].onclick = function () {
                newImages();
            };
            document.getElementsByTagName("input")[1].onclick = function () {
                cacherImages();
            };
            document.getElementsByTagName("input")[2].onclick = function () {
                showImages();
            };

            function newImages() {
                state = true;

                tabImages = document.images;
                for (var i = 0; i < 36; i++) {

                    tabImages[i].style.visibility = 'visible';
                    tabImages[i].src = "./images/im" + i + ".jpg";
                    if (i > 9) {
                        tabImages[i].src = "./images/im" + (i - 10) + ".jpg";
                        if (i > 19) {

                            tabImages[i].src = "./images/im" + (i - 20) + ".jpg";
                            if (i > 27) {
                                tabImages[i].src = "./images/im" + (i - 28) + ".jpg";

                            }
                        }
                    }
                }
                count++;
                clearTimeout(myTime);
                myTime = setTimeout("cacherImages()", 5000);
                if (count > 1) {

                    clearTimeout(myTime);
                    shuffel(tabImages);
                    myTime = setTimeout("cacherImages()", 5000);

                }


            }

            function cacherImages() {
                for (var d = 0; d < 36; d++) {
                    tabImages[d].style.visibility = 'hidden';


                }
                for (var e = 1; e < 37; e++) {
                    document.getElementsByTagName("td")[e].addEventListener("click", match);


                }

            }

            function showImages() {

                clearTimeout(myTime);
                myTime = setTimeout("cacherImages()", 5000);

                for (var i = 0; i < 36; i++) {
                    tabImages[i].style.visibility = 'visible';

                }
                for (var e = 1; e < 37; e++) {
                    document.getElementsByTagName("td")[e].removeEventListener("click", match);


                }


            }

            function  shuffel(tabImages) {

                var currentIndex = tabImages.length, tempval, randIndex;

                while (currentIndex != 0) {

                    randIndex = Math.floor(Math.random() * currentIndex);
                    // alert(randIndex);
                    currentIndex -= 1;

                    tempval = tabImages[currentIndex].src;
                    tabImages[currentIndex].src = tabImages[randIndex].src;
                    tabImages[randIndex].src = tempval;


                }
                alert("Melangé");
                for (var e = 1; e < 37; e++) {
                    document.getElementsByTagName("td")[e].removeEventListener("click", match);


                }

            }

            function match() {
                var num;
                alert(this.cellIndex);
                alert(this.parentNode.rowIndex - 1);
                switch (this.parentNode.rowIndex - 1) {
                    case 0:
                        num = this.cellIndex;
                        break;
                    case 1:
                        num = (6 + this.cellIndex);
                        break;
                    case 2 :
                        num = (12 + this.cellIndex);
                        break;
                    case 3 :
                        num = (18 + this.cellIndex);
                        break;
                    case 4 :
                        num = (24+ this.cellIndex);
                        break;
                        case 5 : 
                            num =(30+this.cellIndex);
                            break;

                }
                alert(num);
                tabImages[num].style.visibility = "visible";

                /*       if (this.style.visibility == "hidden") {
                 //  this.style.visibility = "visible";
                 alert(this.style.visibility.toString());
                 
                 
                 } else if (this.style.visibility == "visible") {
                 
                 alert(this.style.visibility.toString());
                 
                 
                 }*/


            }

        </script>
    </body>
</html>
